<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CzechScript Playground | Online Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        header h1 {
            font-size: 28px;
            font-weight: 600;
        }
        
        header .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        header .logo img {
            width: 40px;
            height: 40px;
        }
        
        .controls {
            display: flex;
            gap: 10px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .btn-run {
            background: #10b981;
            color: white;
        }
        
        .btn-run:hover {
            background: #059669;
        }
        
        .btn-clear {
            background: #ef4444;
            color: white;
        }
        
        .btn-clear:hover {
            background: #dc2626;
        }
        
        .btn-examples {
            background: #3b82f6;
            color: white;
        }
        
        .btn-examples:hover {
            background: #2563eb;
        }
        
        .btn-share {
            background: #f59e0b;
            color: white;
        }
        
        .btn-share:hover {
            background: #d97706;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            height: calc(100vh - 160px);
        }
        
        .editor-panel,
        .output-panel {
            padding: 20px;
        }
        
        .editor-panel {
            border-right: 2px solid #e5e7eb;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .panel-header h2 {
            font-size: 18px;
            color: #374151;
        }
        
        .CodeMirror {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            height: calc(100% - 50px);
        }
        
        .output {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            height: calc(100% - 50px);
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .output .log {
            margin-bottom: 10px;
        }
        
        .output .log.error {
            color: #ef4444;
        }
        
        .output .log.success {
            color: #10b981;
        }
        
        .output .log.info {
            color: #3b82f6;
        }
        
        .output .log.warn {
            color: #f59e0b;
        }
        
        footer {
            background: #f9fafb;
            padding: 15px 30px;
            text-align: center;
            color: #6b7280;
            font-size: 14px;
            border-top: 2px solid #e5e7eb;
        }
        
        .examples-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .examples-modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-content h3 {
            margin-bottom: 20px;
            color: #374151;
        }
        
        .example-item {
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .example-item:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }
        
        .example-item h4 {
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .example-item p {
            color: #6b7280;
            font-size: 14px;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            font-size: 12px;
            color: #9ca3af;
        }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="45" fill="white"/>
                    <text x="50" y="70" font-size="60" font-weight="bold" fill="#667eea" text-anchor="middle">ƒå</text>
                </svg>
                <h1>CzechScript Playground</h1>
            </div>
            <div class="controls">
                <button class="btn-run" onclick="spustit()">
                    ‚ñ∂Ô∏è Spustit
                </button>
                <button class="btn-clear" onclick="vymazat()">
                    üóëÔ∏è Vymazat
                </button>
                <button class="btn-examples" onclick="zobrazitP≈ô√≠klady()">
                    üìö P≈ô√≠klady
                </button>
                <button class="btn-share" onclick="sd√≠let()">
                    üîó Sd√≠let
                </button>
            </div>
        </header>
        
        <div class="main-content">
            <div class="editor-panel">
                <div class="panel-header">
                    <h2>üìù Editor</h2>
                    <div class="stats">
                        <div class="stat">
                            <span>≈ò√°dky:</span>
                            <span id="lineCount">1</span>
                        </div>
                        <div class="stat">
                            <span>Znaky:</span>
                            <span id="charCount">0</span>
                        </div>
                    </div>
                </div>
                <textarea id="editor">// V√≠tejte v CzechScript Playground! üéâ

funkce pozdrav(jm√©no) {
    vra≈• "Ahoj, " + jm√©no + "! üëã";
}

promƒõnn√° zpr√°va = pozdrav("Svƒõte");
vypi≈°(zpr√°va);

// Zkuste napsat vlastn√≠ k√≥d:
promƒõnn√° ƒç√≠sla = [1, 2, 3, 4, 5];
promƒõnn√° souƒçet = 0;

pro (promƒõnn√° i = 0; i < ƒç√≠sla.d√©lka; i++) {
    souƒçet += ƒç√≠sla[i];
}

vypi≈°("Souƒçet:", souƒçet);
</textarea>
            </div>
            
            <div class="output-panel">
                <div class="panel-header">
                    <h2>üì∫ V√Ωstup</h2>
                    <div class="stats">
                        <div class="stat">
                            <span>ƒåas:</span>
                            <span id="execTime">0ms</span>
                        </div>
                    </div>
                </div>
                <div id="output" class="output">
                    <div class="log info">Kliknƒõte na "Spustit" pro vykon√°n√≠ k√≥du...</div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>CzechScript ¬© 2024 | Prvn√≠ ƒçesk√Ω programovac√≠ jazyk | <a href="https://github.com/daker52/czechscript" target="_blank">GitHub</a></p>
        </footer>
    </div>
    
    <div id="examplesModal" class="examples-modal">
        <div class="modal-content">
            <h3>üìö P≈ô√≠klady k√≥du</h3>
            
            <div class="example-item" onclick="naƒç√≠stP≈ô√≠klad('hello')">
                <h4>üëã Hello World</h4>
                <p>Z√°kladn√≠ program pro v√Ωpis textu</p>
            </div>
            
            <div class="example-item" onclick="naƒç√≠stP≈ô√≠klad('kalkulaƒçka')">
                <h4>üßÆ Kalkulaƒçka</h4>
                <p>Jednoduch√© matematick√© operace</p>
            </div>
            
            <div class="example-item" onclick="naƒç√≠stP≈ô√≠klad('fibonacci')">
                <h4>üî¢ Fibonacci</h4>
                <p>Generov√°n√≠ Fibonacciho posloupnosti</p>
            </div>
            
            <div class="example-item" onclick="naƒç√≠stP≈ô√≠klad('t≈ô√≠da')">
                <h4>üèõÔ∏è Objekty a t≈ô√≠dy</h4>
                <p>Pr√°ce s t≈ô√≠dami a objekty</p>
            </div>
            
            <div class="example-item" onclick="naƒç√≠stP≈ô√≠klad('async')">
                <h4>‚è±Ô∏è Asynchronn√≠ k√≥d</h4>
                <p>Async/await a Promises</p>
            </div>
            
            <button onclick="zav≈ô√≠tModal()" style="margin-top: 20px; width: 100%;">Zav≈ô√≠t</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    
    <script>
        // Initialize CodeMirror
        const editor = CodeMirror.fromTextArea(document.getElementById('editor'), {
            mode: 'javascript',
            theme: 'monokai',
            lineNumbers: true,
            autoCloseBrackets: true,
            matchBrackets: true,
            indentUnit: 4,
            tabSize: 4,
            lineWrapping: true
        });
        
        // Update stats
        editor.on('change', () => {
            const doc = editor.getDoc();
            document.getElementById('lineCount').textContent = doc.lineCount();
            document.getElementById('charCount').textContent = doc.getValue().length;
        });
        
        // Examples
        const p≈ô√≠klady = {
            hello: `// üëã Hello World
vypi≈°("Ahoj, svƒõte! üåç");
vypi≈°("CzechScript je super! üöÄ");`,
            
            kalkulaƒçka: `// üßÆ Kalkulaƒçka
funkce seƒçti(a, b) {
    vra≈• a + b;
}

funkce odeƒçti(a, b) {
    vra≈• a - b;
}

funkce vyn√°sob(a, b) {
    vra≈• a * b;
}

funkce vydƒõl(a, b) {
    kdy≈æ (b === 0) {
        vra≈• "Nelze dƒõlit nulou!";
    }
    vra≈• a / b;
}

vypi≈°("5 + 3 =", seƒçti(5, 3));
vypi≈°("5 - 3 =", odeƒçti(5, 3));
vypi≈°("5 * 3 =", vyn√°sob(5, 3));
vypi≈°("5 / 3 =", vydƒõl(5, 3));`,
            
            fibonacci: `// üî¢ Fibonacci posloupnost
funkce fibonacci(n) {
    kdy≈æ (n <= 1) {
        vra≈• n;
    }
    vra≈• fibonacci(n - 1) + fibonacci(n - 2);
}

vypi≈°("Fibonacci posloupnost:");
pro (promƒõnn√° i = 0; i < 10; i++) {
    vypi≈°("F(" + i + ") =", fibonacci(i));
}`,
            
            t≈ô√≠da: `// üèõÔ∏è T≈ô√≠dy a objekty
t≈ô√≠da Osoba {
    konstruktor(jm√©no, vƒõk) {
        toto.jm√©no = jm√©no;
        toto.vƒõk = vƒõk;
    }
    
    p≈ôedstavSe() {
        vra≈• "Ahoj, jmenuji se " + toto.jm√©no + 
               " a je mi " + toto.vƒõk + " let.";
    }
    
    majiVek() {
        vra≈• toto.vƒõk >= 18;
    }
}

promƒõnn√° osoba = nov√Ω Osoba("Jan", 25);
vypi≈°(osoba.p≈ôedstavSe());
vypi≈°("Je plnolet√Ω?", osoba.majiVek());`,
            
            async: `// ‚è±Ô∏è Asynchronn√≠ k√≥d
async funkce poƒçkej(ms) {
    vra≈• nov√Ω Promise((resolve) => {
        setTimeout(resolve, ms);
    });
}

async funkce hlavn√≠() {
    vypi≈°("Zaƒç√≠n√°m...");
    
    ƒçekej poƒçkej(1000);
    vypi≈°("1 sekunda ubƒõhla");
    
    ƒçekej poƒçkej(1000);
    vypi≈°("2 sekundy ubƒõhly");
    
    ƒçekej poƒçkej(1000);
    vypi≈°("3 sekundy ubƒõhly");
    
    vypi≈°("Hotovo!");
}

hlavn√≠();`
        };
        
        function spustit() {
            const k√≥d = editor.getValue();
            const v√Ωstup = document.getElementById('output');
            v√Ωstup.innerHTML = '';
            
            const zaƒç√°tek = performance.now();
            
            try {
                // Czech to JS translation
                const jsK√≥d = p≈ôelo≈æit(k√≥d);
                
                // Capture console output
                const logy = [];
                const p≈Øvodn√≠Log = console.log;
                console.log = (...args) => {
                    logy.push({ typ: 'log', zpr√°va: args.join(' ') });
                };
                
                // Execute
                eval(jsK√≥d);
                
                // Restore console
                console.log = p≈Øvodn√≠Log;
                
                // Display output
                logy.forEach(log => {
                    const div = document.createElement('div');
                    div.className = 'log ' + log.typ;
                    div.textContent = log.zpr√°va;
                    v√Ωstup.appendChild(div);
                });
                
                if (logy.length === 0) {
                    v√Ωstup.innerHTML = '<div class="log success">‚úÖ K√≥d √∫spƒõ≈°nƒõ vykon√°n (bez v√Ωstupu)</div>';
                }
                
            } catch (err) {
                v√Ωstup.innerHTML = `<div class="log error">‚ùå Chyba: ${err.message}</div>`;
            }
            
            const konec = performance.now();
            document.getElementById('execTime').textContent = Math.round(konec - zaƒç√°tek) + 'ms';
        }
        
        function vymazat() {
            editor.setValue('');
            document.getElementById('output').innerHTML = '<div class="log info">Editor vymaz√°n</div>';
        }
        
        function zobrazitP≈ô√≠klady() {
            document.getElementById('examplesModal').classList.add('active');
        }
        
        function zav≈ô√≠tModal() {
            document.getElementById('examplesModal').classList.remove('active');
        }
        
        function naƒç√≠stP≈ô√≠klad(n√°zev) {
            editor.setValue(p≈ô√≠klady[n√°zev]);
            zav≈ô√≠tModal();
        }
        
        function sd√≠let() {
            const k√≥d = editor.getValue();
            const encoded = btoa(encodeURIComponent(k√≥d));
            const url = window.location.origin + window.location.pathname + '?code=' + encoded;
            
            navigator.clipboard.writeText(url).then(() => {
                alert('‚úÖ Odkaz zkop√≠rov√°n do schr√°nky!');
            });
        }
        
        // Simple Czech to JS translator
        function p≈ôelo≈æit(k√≥d) {
            return k√≥d
                .replace(/vypi≈°\(/g, 'console.log(')
                .replace(/funkce /g, 'function ')
                .replace(/vra≈• /g, 'return ')
                .replace(/promƒõnn√° /g, 'let ')
                .replace(/konstanta /g, 'const ')
                .replace(/kdy≈æ /g, 'if ')
                .replace(/jinak /g, 'else ')
                .replace(/pro /g, 'for ')
                .replace(/dokud /g, 'while ')
                .replace(/t≈ô√≠da /g, 'class ')
                .replace(/nov√Ω /g, 'new ')
                .replace(/toto\./g, 'this.')
                .replace(/konstruktor\(/g, 'constructor(')
                .replace(/ƒçekej /g, 'await ')
                .replace(/async funkce/g, 'async function')
                .replace(/\.d√©lka/g, '.length');
        }
        
        // Load code from URL
        const urlParams = new URLSearchParams(window.location.search);
        const codeParam = urlParams.get('code');
        if (codeParam) {
            try {
                const decoded = decodeURIComponent(atob(codeParam));
                editor.setValue(decoded);
            } catch (e) {
                console.error('Chyba p≈ôi naƒç√≠t√°n√≠ k√≥du z URL');
            }
        }
    </script>
</body>
</html>
